FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="1.0.0"
LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBtb25nb2RiLWFwYgpkZXNjcmlwdGlvbjogRGVwbG95IE1v\
bmdvREIgYXBwIG9uIHlvdXIgT3BlbnNoaWZ0IFByb2plY3QKYmluZGFibGU6IFRydWUKYXN5bmM6\
IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vYWNjZXNzLnJl\
ZGhhdC5jb20KICBpbWFnZVVybDogaHR0cDovL25pZ2h0ZGV2ZWxvcGVyLm5ldC93cC1jb250ZW50\
L3VwbG9hZHMvMjAxNC8xMi9tb25nb19kYi5wbmcKICBkaXNwbGF5TmFtZTogTW9uZ29EQiAoQVBC\
KQogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGxvbmdEZXNjcmlwdGlv\
bjogTW9uZ29EQiBpcyBhIGRvY3VtZW50IGRhdGFiYXNlIHdpdGggdGhlIHNjYWxhYmlsaXR5IGFu\
ZCBmbGV4aWJpbGl0eSB0aGF0IHlvdSB3YW50IHdpdGggdGhlIHF1ZXJ5aW5nIGFuZCBpbmRleGlu\
ZyB0aGF0IHlvdSBuZWVkLiBUaGlzIEFQQiB3aWxsIGNvdmVyIGFuIHN0YW5kYWxvbmUgYW5kIEhB\
IGRlcGxveW1lbnQuCiAgc2VydmljZU5hbWU6IG1vbmdvZGIKcGxhbnM6CiAgLSBuYW1lOiBlcGhl\
bWVyYWwKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIG1vbmdvZGIt\
YXBiIHdpdGhvdXQgcGVyc2lzdGVudCBzdG9yYWdlCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0\
YToKICAgICAgZGlzcGxheU5hbWU6IEVwaGVtZXJhbAogICAgICBsb25nRGVzY3JpcHRpb246IFRo\
aXMgcGxhbiB3aWxsIGRlcGxveSBhIE1vbmdvREIgc3RhbmRhbG9uZSBpbnN0YW5jZS9zIHVzaW5n\
IGVwaGVtZXJhbCBzdG9yYWdlCiAgICAgIGNvc3Q6IOKCrDAuMDAKICAgIHBhcmFtZXRlcnM6CiAg\
ICAgICAgIyBDb250YWluZXIgU3BlY3MgCiAgICAgIC0gbmFtZTogTU9OR09EQl9WRVJTSU9OCiAg\
ICAgICAgZGVmYXVsdDogMy40CiAgICAgICAgdGl0bGU6IFZlcnNpb24gb2YgTW9uZ29EQiBpbWFn\
ZSB0byBiZSB1c2VkICgyLjYsIDMuMiBvciAzLjQpLgogICAgICAgIHR5cGU6IGVudW0KICAgICAg\
ICBlbnVtOiBbJzIuNicsICczLjInLCAnMy40J10KICAgICAgICBkaXNwbGF5X3R5cGU6IHNlbGVj\
dAogICAgICAtIG5hbWU6IE1PTkdPREJfSU1BR0VfVEFHCiAgICAgICAgZGVmYXVsdDogJ2xhdGVz\
dCcKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1d\
KiQiCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCgogICAgICAgICMgTW9uZ29EQiBDb25mCiAgICAg\
IC0gbmFtZTogTU9OR09EQl9VU0VSCiAgICAgICAgZGVmYXVsdDogJ3VzZXJuYW1lJwogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV8uLV0qJCIKICAgICAg\
ICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0aXRsZTogVXNlcm5hbWUgZm9yIE1vbmdvREIgdXNl\
ciB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgYWNjZXNzaW5nIHRoZSBkYXRhYmFzZS4KICAgICAgLSBu\
YW1lOiBNT05HT0RCX1BBU1NXT1JECiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZh\
dWx0OiAncGFzc3dvcmQnCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5b\
YS16QS1aMC05Xy4tXSokIgogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0\
aXRsZTogUGFzc3dvcmQgZm9yIHRoZSBNb25nb0RCIGNvbm5lY3Rpb24gdXNlci4KICAgICAgLSBu\
YW1lOiBNT05HT0RCX0RBVEFCQVNFCiAgICAgICAgZGVmYXVsdDogJ3NhbXBsZWRiJwogICAgICAg\
IHBhdHRlcm46ICJeW2EtekEtWjAtOV8tXSokIgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IHRpdGxlOiBOYW1lIG9mIHRoZSBNb25nb0RCIGRhdGFiYXNlIGFjY2Vzc2VkLgogICAgICAtIG5h\
bWU6IE1PTkdPREJfQURNSU5fUEFTU1dPUkQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAg\
IGRlZmF1bHQ6ICdhZG1pbicKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAg\
IHRpdGxlOiBQYXNzd29yZCBmb3IgdGhlIGRhdGFiYXNlIGFkbWluIHVzZXIuCgogICAgICAgICMj\
IEVudmlyb25tZW50IHNpemluZwogICAgICAtIG5hbWU6IE1PTkdPREJfTUVNT1JZX0xJTUlUCiAg\
ICAgICAgZGVmYXVsdDogNTEyTWkKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTog\
TWF4aW11bSBhbW91bnQgb2YgbWVtb3J5IHRoZSBjb250YWluZXIgY2FuIHVzZS4gZS5nIDUxMk1p\
IDFHaQoKICAtIG5hbWU6IHBlcnNpc3RlbnQKICAgIGRlc2NyaXB0aW9uOiBQZXJzaXN0ZW50IHN0\
b3JhZ2UgcGxhbiB0byBkZXBsb3kgbW9uZ29kYi1hcGIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFk\
YXRhOgogICAgICBkaXNwbGF5TmFtZTogUGVyc2lzdGVudAogICAgICBsb25nRGVzY3JpcHRpb246\
IFRoaXMgcGxhbiB3aWxsIGRlcGxveSBhIE1vbmdvREIgc3RhbmRhbG9uZSB1c2luZyBwZXJzaXN0\
ZW50IHN0b3JhZ2UKICAgICAgY29zdDog4oKsMC4wMAogICAgcGFyYW1ldGVyczoKICAgICAgICAj\
IENvbnRhaW5lciBTcGVjcyAKICAgICAgLSBuYW1lOiBNT05HT0RCX1ZFUlNJT04KICAgICAgICBk\
ZWZhdWx0OiAzLjQKICAgICAgICB0aXRsZTogVmVyc2lvbiBvZiBNb25nb0RCIGltYWdlIHRvIGJl\
IHVzZWQgKDIuNiwgMy4yIG9yIDMuNCkuCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06\
IFsnMi42JywgJzMuMicsICczLjQnXQogICAgICAgIGRpc3BsYXlfdHlwZTogc2VsZWN0CiAgICAg\
IC0gbmFtZTogTU9OR09EQl9JTUFHRV9UQUcKICAgICAgICBkZWZhdWx0OiAnbGF0ZXN0JwogICAg\
ICAgIHRpdGxlOiBUYWcgb2YgY29udGFpbmVyIGltYWdlIHRvIGJlIHVzZWQuCiAgICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSokIgogICAgICAgIHJl\
cXVpcmVkOiBGYWxzZQoKICAgICAgICAjIE1vbmdvREIgQ29uZgogICAgICAtIG5hbWU6IE1PTkdP\
REJfVVNFUgogICAgICAgIGRlZmF1bHQ6ICd1c2VybmFtZScKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAgICAgICAgcmVxdWlyZWQ6IEZh\
bHNlCiAgICAgICAgdGl0bGU6IFVzZXJuYW1lIGZvciBNb25nb0RCIHVzZXIgdGhhdCB3aWxsIGJl\
IHVzZWQgZm9yIGFjY2Vzc2luZyB0aGUgZGF0YWJhc2UuCiAgICAgIC0gbmFtZTogTU9OR09EQl9Q\
QVNTV09SRAogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogJ3Bhc3N3b3Jk\
JwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV8uLV0q\
JCIKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgdGl0bGU6IFBhc3N3b3Jk\
IGZvciB0aGUgTW9uZ29EQiBjb25uZWN0aW9uIHVzZXIuCiAgICAgIC0gbmFtZTogTU9OR09EQl9E\
QVRBQkFTRQogICAgICAgIGRlZmF1bHQ6ICdzYW1wbGVkYicKICAgICAgICBwYXR0ZXJuOiAiXlth\
LXpBLVowLTlfLV0qJCIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogTmFtZSBv\
ZiB0aGUgTW9uZ29EQiBkYXRhYmFzZSBhY2Nlc3NlZC4KICAgICAgLSBuYW1lOiBNT05HT0RCX0FE\
TUlOX1BBU1NXT1JECiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAnYWRt\
aW4nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSokIgogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogUGFzc3dv\
cmQgZm9yIHRoZSBkYXRhYmFzZSBhZG1pbiB1c2VyLgoKICAgICAgICAjIyBFbnZpcm9ubWVudCBz\
aXppbmcKICAgICAgLSBuYW1lOiBNT05HT0RCX0RBVEFfU1RPUkFHRV9TSVpFCiAgICAgICAgZGVm\
YXVsdDogMQogICAgICAgIHR5cGU6IG51bWJlcgogICAgICAgIHRpdGxlOiBWb2x1bWUgc3BhY2Ug\
YXZhaWxhYmxlIGZvciBkYXRhIGluR2kuCiAgICAgIC0gbmFtZTogTU9OR09EQl9NRU1PUllfTElN\
SVQKICAgICAgICBkZWZhdWx0OiA1MTJNaQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRp\
dGxlOiBNYXhpbXVtIGFtb3VudCBvZiBtZW1vcnkgdGhlIGNvbnRhaW5lciBjYW4gdXNlLiBlLmcg\
NTEyTWkgMUdpCgogIC0gbmFtZTogY2x1c3RlcgogICAgZGVzY3JpcHRpb246IEhBIE1vbmdvREIg\
ZGVwbG95bWVudCB3aXRoIFBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnJlZTogVHJ1ZQogICAgbWV0\
YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBSZXBsaWNhIFNldCBEZXBsb3ltZW50CiAgICAgIGxv\
bmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIHdpbGwgZGVwbG95IGEgTW9uZ29EQiBIQSBpbnN0YW5j\
ZSB1c2luZyBwZXJzaXN0ZW50IHN0b3JhZ2UKICAgICAgY29zdDog4oKsMC4wMAogICAgcGFyYW1l\
dGVyczoKICAgICAgICAjIENvbnRhaW5lciBTcGVjcyAKICAgICAgLSBuYW1lOiBNT05HT0RCX1ZF\
UlNJT04KICAgICAgICBkZWZhdWx0OiAzLjQKICAgICAgICB0aXRsZTogVmVyc2lvbiBvZiBNb25n\
b0RCIGltYWdlIHRvIGJlIHVzZWQgKDIuNiwgMy4yIG9yIDMuNCkuCiAgICAgICAgdHlwZTogZW51\
bQogICAgICAgIGVudW06IFsnMi42JywgJzMuMicsICczLjQnXQogICAgICAgIGRpc3BsYXlfdHlw\
ZTogc2VsZWN0CiAgICAgIC0gbmFtZTogTU9OR09EQl9JTUFHRV9UQUcKICAgICAgICBkZWZhdWx0\
OiAnbGF0ZXN0JwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEt\
WjAtOV8uLV0qJCIKICAgICAgICByZXF1aXJlZDogRmFsc2UKCiAgICAgICAgIyBNb25nb0RCIENv\
bmYKICAgICAgLSBuYW1lOiBNT05HT0RCX1VTRVIKICAgICAgICBkZWZhdWx0OiAndXNlcm5hbWUn\
CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSok\
IgogICAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICAgIHRpdGxlOiBVc2VybmFtZSBmb3IgTW9u\
Z29EQiB1c2VyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBhY2Nlc3NpbmcgdGhlIGRhdGFiYXNlLgog\
ICAgICAtIG5hbWU6IE1PTkdPREJfUEFTU1dPUkQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ICAgIGRlZmF1bHQ6ICdwYXNzd29yZCcKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0\
ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAog\
ICAgICAgIHRpdGxlOiBQYXNzd29yZCBmb3IgdGhlIE1vbmdvREIgY29ubmVjdGlvbiB1c2VyLgog\
ICAgICAtIG5hbWU6IE1PTkdPREJfREFUQUJBU0UKICAgICAgICBkZWZhdWx0OiAnc2FtcGxlZGIn\
CiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy1dKiQiCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgdGl0bGU6IE5hbWUgb2YgdGhlIE1vbmdvREIgZGF0YWJhc2UgYWNjZXNzZWQuCiAg\
ICAgIC0gbmFtZTogTU9OR09EQl9BRE1JTl9QQVNTV09SRAogICAgICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICAgICAgZGVmYXVsdDogJ2FkbWluJwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV8u\
LV0qJCIKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3Jk\
CiAgICAgICAgdGl0bGU6IFBhc3N3b3JkIGZvciB0aGUgZGF0YWJhc2UgYWRtaW4gdXNlci4KCiAg\
ICAgICAgIyMgRW52aXJvbm1lbnQgc2l6aW5nCiAgICAgIC0gbmFtZTogTU9OR09EQl9EQVRBX1NU\
T1JBR0VfU0laRQogICAgICAgIGRlZmF1bHQ6IDEKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAg\
ICB0aXRsZTogVm9sdW1lIHNwYWNlIGF2YWlsYWJsZSBmb3IgZGF0YSBpbiBHaS4KICAgICAgLSBu\
YW1lOiBNT05HT0RCX01FTU9SWV9MSU1JVAogICAgICAgIGRlZmF1bHQ6IDUxMk1pCiAgICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IE1heGltdW0gYW1vdW50IG9mIG1lbW9yeSB0aGUg\
Y29udGFpbmVyIGNhbiB1c2UuIGUuZyA1MTJNaSAxR2kKCiAgICAgICAgIyMgSEEgRGVwbG95bWVu\
dAogICAgICAtIG5hbWU6IE1PTkdPREJfS0VZRklMRV9WQUxVRQogICAgICAgIHJlcXVpcmVkOiBU\
cnVlCiAgICAgICAgZGVmYXVsdDogJ3h4eHh4eHh4eHh4eHh4eHh4JwogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgICB0aXRsZTogS2V5Zmls\
ZSB0byBlbmNvZGUgdGhlIGNvbW11bmljYXRpb24gYmV0d2VlbiBSZXBsaWNhIHNldCBtZW1iZXJz\
LgogICAgICAtIG5hbWU6IE1PTkdPREJfUkVQTElDQV9OQU1FCiAgICAgICAgcmVxdWlyZWQ6IEZh\
bHNlCiAgICAgICAgZGVmYXVsdDogJ3JzMCcKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0\
aXRsZTogUmVwbGljYSBTZXQgbmFtZSBmb3IgTW9uZ29EQiBDbHVzdGVyLgogICAgICAtIG5hbWU6\
IE1PTkdPREJfU0VSVklDRV9OQU1FCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAgZGVm\
YXVsdDogJ21vbmdvZGInCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFNlcnZp\
Y2UgbmFtZSBmb3IgTW9uZ29EQidzIFJlcGxpY2EgU2V0LgoK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
